# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Bug Detection ML Project that uses machine learning to predict bug risk in code commits. The project implements a RandomForest classifier trained on commit metrics to identify high-risk commits and suggest safer alternatives.

**Core Component**: `BugDetectorML.py` - A Streamlit web application that provides an interactive interface for training and using the bug prediction model.

## Running the Application

```bash
streamlit run BugDetectorML.py
```

The application requires uploading `commits.csv` through the web interface. The CSV must contain these columns:
- `lines_changed`: Number of lines modified in the commit
- `files_changed`: Number of files modified
- `message_length`: Length of the commit message
- `label`: Binary label (0 = safe commit, 1 = risky commit)

## Architecture

### Model Pipeline

1. **Data Loading**: User uploads `commits.csv` via Streamlit file uploader
2. **Training**: RandomForest model (100 estimators) trained on 80% of data
3. **Prediction Interface**: Dynamic sliders for each feature allow users to simulate commits
4. **Risk Analysis**: Model predicts probability of a commit being risky (0-100%)
5. **Suggestion Generation**: Generates safer commit alternatives by exploring feature variations

### Key Design Decisions

- **Feature Engineering**: All features are numeric and handled uniformly through dynamic slider generation
- **Risk Threshold**: Suggestions are filtered to show only commits with <20% predicted risk
- **Variation Strategy**: Suggestions are generated by exploring Â±1 variations of each feature within valid ranges
- **Train/Test Split**: 80/20 split with fixed random_state=42 for reproducibility

## Data Format

The `commits.csv` file contains synthetic or historical commit data with these characteristics:
- Features represent common commit metrics (size, scope, documentation quality)
- Labels indicate whether a commit introduced bugs (1) or was safe (0)
- All features are integers with varying ranges based on the dataset

## Dependencies

Required Python packages (not in requirements.txt, install manually):
- `streamlit` - Web application framework
- `pandas` - Data manipulation
- `scikit-learn` - RandomForest model and train/test split
- `itertools` - Built-in (for generating commit variations)

Install with:
```bash
pip install streamlit pandas scikit-learn
```

## Known Issues

- Line 68 in `BugDetectorML.py` has a stray character 'B' that should be removed
- No requirements.txt file exists (dependencies must be installed manually)
- No model persistence - model is retrained on every file upload
